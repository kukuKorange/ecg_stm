# ECG-STM32 心率血氧心电监测系统

基于STM32的便携式生理信号监测设备，支持心率、血氧饱和度及心电图实时采集与显示。

---

## 功能特性

- **心率监测** - MAX30102传感器实时采集
- **血氧检测** - SpO2饱和度测量
- **心电图采集** - ADC采集心电信号
- **OLED显示** - 分页显示各项数据
- **报警功能** - 心率异常蜂鸣器提示
- **触摸检测** - LED指示手指触摸状态
- **WiFi上云** - 数据远程传输（可选）

---

## 版本历史

### v1.3 (2026/01/04)

- 重构系统架构，优化依赖库
- 改进FIR滤波算法，提升信号质量
- 完善上位机通信协议
- 新增数据分页显示，按钮切换页面

### v1.2 (2025/04/11)

- 新增ADC心电图采集功能
- 完成心率、血氧、心电图综合测试
- 蜂鸣器报警电路调试完成

### v1.1 (2025/04/11)

- 集成WiFi模块
- 优化通信逻辑（移除冗余checkcmd函数）
- 修复delay延时函数

### v1.0 (2025/04/10)

- 基础功能实现
- 心率阈值报警（蜂鸣器）
- LED触摸指示
- OLED显示心率/血氧数据

---

## 硬件配置

| 模块 | 型号/接口 | 功能 |
|------|----------|------|
| MCU | STM32 | 主控制器 |
| 心率血氧 | MAX30102 | I2C接口 |
| 显示屏 | OLED | 数据显示 |
| 蜂鸣器 | 有源蜂鸣器 | 报警提示 |
| WiFi | ESP模块 | 数据上云 |
| ADC | 内置ADC | 心电采集 |

---

## 目录结构

```
ecg_stm/
├── User/
│   ├── main.c              # 主程序
│   └── max30102/
│       ├── max30102.c      # 传感器驱动
│       └── max30102_fir.c  # FIR滤波器
├── Hardware/               # 硬件驱动
├── Libraries/              # 标准库
└── README.md
```

---

## 使用说明

1. 将手指放置于MAX30102传感器上
2. LED亮起表示检测到手指
3. OLED屏幕显示实时心率和血氧
4. 按钮切换显示页面（心率/血氧/心电图）
5. 心率异常时蜂鸣器自动报警

